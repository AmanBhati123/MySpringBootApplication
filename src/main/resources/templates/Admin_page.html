<!doctype html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8" />
	<title>Document</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
	<link rel="stylesheet" href="" th:href="@{/css/Admin_page.css}" />

</head>
<body>
    <a class="back" href="/home">Back to Home</a>
    
    <center>
        <section class="tables">
            <div class="admins">
                <h2>Admins :</h2>
                <table>
                    <tr>
                        <th>Admin_Id</th>
                        <th>Admin_Name</th>
                        <th>Admin_Email</th>
                        <th>Admin_Number</th>
                        <th>Actions</th>
                    </tr>
                    <tr th:each="admin :${admins}">
                        <td th:text="${admin.adminId}"></td>
                        <td th:text="${admin.adminName}"></td>
                        <td th:text="${admin.adminEmail}"></td>
                        <td th:text="${admin.adminNumber}"></td>
                        <td>
                            <a style="color: blue;" th:href="@{'/updateAdmin/'+${admin.adminId}}"><i class="fa-solid fa-pen"></i></a>
                            <span>&nbsp;</span>
                            <a style="color: red;" th:href="@{'/deleteAdmin/'+${admin.adminId}}"><i class="fa-solid fa-trash"></i></a>
                        </td>
                    </tr>
                </table>
                <a class="btns" th:href="@{/addAdmin}">Add_Admin</a>
            </div>

            <div class="users" th:object="${userObject}">
                <h2>Users :</h2>
                <table>
                    <tr>
                        <th>User_Id</th>
                        <th>User_Name</th>
                        <th>User_Email</th>
                        <th>User_Number</th>
                        <th>Actions</th>
                    </tr>
                    <tr th:each="user :${users}">
                        <td th:text="${user.userId}"></td>
                        <td th:text="${user.userName}"></td>
                        <td th:text="${user.userEmail}"></td>
                        <td th:text="${user.userNumber}"></td>
                        <td>
                            <a style="color: blue;" th:href="@{'/updateUser/'+${user.userId}}"><i class="fa-solid fa-pen"></i></a>
                            <span>&nbsp;</span>
                            <a style="color: red;" th:href="@{'/deleteUser/'+${user.userId}}"><i class="fa-solid fa-trash"></i></a>
                        </td>
                    </tr>
                </table>
                <a class="btns" th:href="@{'/addUser'}">Add_User</a>
            </div>

            <div class="products">
                <h2>Products :</h2>
                <table>
                    <tr>
                        <th>Product_Id</th>
                        <th>Product_Name</th>
                        <th>Product_Price</th>
                        <th>Product_Description</th>
                        <th>Action</th>
                    </tr>
                    <tr th:each="product :${products}">
                        <td th:text="${product.pid}"></td>
                        <td th:text="${product.pname}"></td>
                        <td th:text="${product.pprice}"></td>
                        <td th:text="${product.pdescription}"></td>
                        <td>
                            <a style="color: blue;" th:href="@{'/updateProduct/'+${product.pid}}"><i class="fa-solid fa-pen"></i></a>
                            <span>&nbsp;</span>
                            <a style="color: red;" th:href="@{'/deleteProduct/'+${product.pid}}"><i class="fa-solid fa-trash"></i></a>
                        </td>
                    </tr>
                </table>
                <a class="btns" th:href="@{'/addProduct'}">Add_Product</a>
            </div>

            <!-- âœ… Donate Button -->
            <div class="donate-section" style="margin-top: 20px;">
                <a class="payment" href="/donate" style="background-color: orange; color: white; padding: 10px 20px; border-radius: 5px; text-decoration: none;">Donate</a>
            </div>

        </section>
    </center>
    <script>
    function submitDonate(event) {
        event.preventDefault();
        const amount = document.getElementById('donateAmount').value;
        
        fetch('/donate', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            body: `amount=${encodeURIComponent(amount)}`
        })
        .then(response => response.json())
        .then(data => {
            alert(data.message);
            if(data.paymentUrl) {
                window.location.href = data.paymentUrl;
            }
        })
        .catch(err => {
            console.error('Donation error:', err);
            alert('Something went wrong.');
        });
        return false;
    }
</script>

</body>

</html>